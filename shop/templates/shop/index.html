
{% extends "shop/base_template.html" %}	
{% block header %}<header>{% endblock %}
	{% block active %}
	{% load static %}	
	<div class="menu-desktop">
		<ul class="main-menu">
			<li class="active-menu">
				<a href="{% url 'home' %}">Accueil</a>
			</li>

			<li>
				<a href="{% url 'boutique' %}">Boutique</a>
			</li>

			<li>
				<a href="{% url 'apropos' %}">A propos</a>
			</li>

			<li>
				<a href="{% url 'contact' %}">Contact</a>
			</li>
		</ul>
	</div>
	{% endblock %}
	{% block iconpc %}
	{% load static %}
	<div class="wrap-icon-header flex-w flex-r-m">
		<div class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 js-show-modal-search">
			<i class="zmdi zmdi-search"></i>
		</div>

		<div class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 icon-header-noti js-show-cart">
			<i class="zmdi zmdi-shopping-cart nav-icon" ><Samp id="panier" class="tehhk con-header-item">0</Samp></i>
		</div>
	</div>
	{% endblock %}

	{% block iconmobile %}
	{% load static %}
	<div class="wrap-icon-header flex-w flex-r-m m-r-15">
		<div class="icon-header-item cl2 hov-cl1 trans-04 p-r-11 js-show-modal-search">
			<i class="zmdi zmdi-search"></i>
		</div>

		<div class="icon-header-item cl2 hov-cl1 trans-04 p-r-11 p-l-10 icon-header-noti js-show-cart">
			<i class="zmdi zmdi-shopping-cart nav-icon" ><Samp id="panier2" class="tehhke">0</Samp></i>
		</div>
	</div>
	{% endblock %}
	{% block panier %}
	<div class="wrap-header-cart js-panel-cart ">
		<div class="s-full js-hide-cart"></div>

		<div class="header-cart flex-col-l p-l-65 p-r-25">
			<div class="header-cart-title flex-w flex-sb-m p-b-8">
				<span class="mtext-103 cl2">
					Ton Panier
				</span>

				<div class="fs-35 lh-10 cl2 p-lr-5 pointer hov-cl1 trans-04 js-hide-cart">
					<i class="zmdi zmdi-close"></i>
				</div>
			</div>
			
			<div class="header-cart-content flex-w js-pscroll">
				<ul class="header-cart-wrapitem w-full" id="item-list">

					
				</ul>
				
				<div class="w-full" id="item-total">
					Chaque ajout d'article doit Ãªtre mis Ã  jour
					<a href="{% url 'home' %}" class="flex-c-m stext-101 cl2 size-118 bg8 bor13 hov-btn3 p-lr-15 trans-04 pointer m-tb-5">
						Mise Ã  jour du ðŸ›’
					</a>
					<div class="header-cart-buttons flex-w w-full">
						
						
					</div>
					
				</div>
				<div class="w-full">
					<a href="{% url 'checkout' %}" class="flex-c-m stext-101 cl0 size-107 bg3 bor2 hov-btn3 p-lr-15 trans-04 m-b-10">
						CommanderðŸ›’
					</a>
				</div>
			</div>
		</div>
	</div>
	{% endblock %}
	{% block contente %}
	{% load static %}
	<!-- Slider -->
	<section class="section-slide">
		<div class="wrap-slick1">
			<div class="slick1">
				<div class="item-slick1 slide-01">
					<div class="container h-full">
						<div class="flex-col-l-m h-full p-t-100 p-b-30 respon5">
							<div class="layer-slick1 animated visible-false" data-appear="fadeInDown" data-delay="0">
								<span class="ltext-101 cl2 respon2">
									Bienvenue
								</span>
							</div>
								
							<div class="layer-slick1 animated visible-false" data-appear="fadeInUp" data-delay="800">
								<h2 class="ltext-201 cl2 p-t-19 p-b-43 respon1">
									Sur Don-shop
								</h2>
							</div>
								
							<div class="layer-slick1 animated visible-false" data-appear="zoomIn" data-delay="1600">
								<a href="{% url 'boutique' %}" class="flex-c-m stext-101 cl0 size-101 bg1 bor1 hov-btn1 p-lr-15 trans-04">
									AchÃ¨te maintenant
								</a>
							</div>
						</div>
					</div>
				</div>

				<div class="item-slick1 slide-02">
					<div class="container h-full">
						<div class="flex-col-l-m h-full p-t-100 p-b-30 respon5">
							<div class="layer-slick1 animated visible-false" data-appear="rollIn" data-delay="0">
								<span class="ltext-101 cl2 respon2">
									NouveautÃ©
								</span>
							</div>
								
							<div class="layer-slick1 animated visible-false" data-appear="lightSpeedIn" data-delay="800">
								<h2 class="ltext-201 cl2 p-t-19 p-b-43 respon1">
									Chez Meleine
								</h2>
							</div>
								
							<div class="layer-slick1 animated visible-false" data-appear="slideInUp" data-delay="1600">
								<a href="product.html" class="flex-c-m stext-101 cl0 size-101 bg1 bor1 hov-btn1 p-lr-15 trans-04">
									AchÃ¨te maintenant
								</a>
							</div>
						</div>
					</div>
				</div>

				<div class="item-slick1 slide-03">
					<div class="container h-full">
						<div class="flex-col-l-m h-full p-t-100 p-b-30 respon5">
							<div class="layer-slick1 animated visible-false" data-appear="rotateInDownLeft" data-delay="0">
								<span class="ltext-101 cl2 respon2">
									Produits <script>document.write(new Date().getFullYear());</script>
								</span>
							</div>
								
							<div class="layer-slick1 animated visible-false" data-appear="rotateInUpRight" data-delay="800">
								<h2 class="ltext-201 cl2 p-t-19 p-b-43 respon1">
									nouvel arrivage
								</h2>
							</div>
								
							<div class="layer-slick1 animated visible-false" data-appear="rotateIn" data-delay="1600">
								<a href="product.html" class="flex-c-m stext-101 cl0 size-101 bg1 bor1 hov-btn1 p-lr-15 trans-04">
									AchÃ¨te maintenant
								</a>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>

	<!-- Product -->
	<section class="bg0 p-t-23 p-b-140">
		<div class="container">
			<div class="p-b-10">
				<h3 class="ltext-103 cl5">
					Nos produits
				</h3>
			</div>

			<div class="flex-w flex-sb-m p-b-52">
				<div class="flex-w flex-l-m filter-tope-group m-tb-10">
					<button class="stext-106 cl6 hov1 bor3 trans-04 m-r-32 m-tb-5 how-active1" data-filter="*">
						De la boutique don-shop
					</button>


				</div>

				<div class="flex-w flex-c-m m-tb-10">
					<div class="flex-c-m stext-106 cl6 size-105 bor4 pointer hov-btn3 trans-04 m-tb-4 js-show-search">
						<i class="icon-search cl2 m-r-6 fs-15 trans-04 zmdi zmdi-search"></i>
						<i class="icon-close-search cl2 m-r-6 fs-15 trans-04 zmdi zmdi-close dis-none"></i>
						Recherche
					</div>
				</div>
				
				<!-- Search product -->
				
				<div class="dis-none panel-search w-full p-t-10 p-b-15">
					<form>
						<div class="bor8 dis-flex p-l-15">
							
							<button class="size-113 flex-c-m fs-16 cl2 hov-cl1 trans-04">
								<i class="zmdi zmdi-search"></i>
							</button>
						
							
							<input class="mtext-107 cl2 size-114 plh2 p-r-15" type="search" name="search" placeholder="Recherche">
							<!-- <button class="flex-c-m trans-04">
								
							</button> -->
						</div>	
					</form>
				</div>
			</div>

			<div class="row isotope-grid">
				{% for product in product_object %}
				<div class="col-sm-6 col-md-4 col-lg-3 p-b-35 isotope-item women">
					<!-- Block2 -->
					<div class="block2">
						<div class="block2-pic hov-img0">
							<img id="cc{{ product.id }}" src="{{ product.image.url }}" alt="IMG-PRODUCT">

							<a href="{{ product.id}}" class="block2-btn flex-c-m stext-103 cl2 size-102 bg0 bor2 hov-btn1 p-lr-15 trans-04">
								Details
							</a>
						</div>

						<div class="block2-txt flex-w flex-t p-t-14">
							<div class="block2-txt-child1 flex-col-l ">
								<h4 class="stext-104 cl4 hov-cl1 trans-04 js-name-b2 p-b-6" id="ab{{ product.id }}">{{ product.title }}</h4>
								<span class="stext-105 cl3">
									<p id="price{{ product.id }}">{{ product.price }}</p>
								</span>
							</div>

							<div class="block2-txt-child2 flex-r p-t-3">
								<a class="btn-addwish-b2 dis-block pos-relative acheter ted" id="{{ product.id }}">
									<i class="zmdi zmdiTK zmdi-shopping-cart "></i><sup>+</sup>
								</a>
							</div>
						</div>
					</div>
				</div>
				{% empty %}
				<div class="container">
					<div class="p-t-40">
						<h1 class="stext-107 cl6 txt-center">Pas de produit disponible. . . .ðŸ§º<br><a href="{% url 'contact' %}">Contacter</a> le service Don pour passer votre commande.</h1>
					</div>
				</div>
				{% endfor %}
			</div>
		</div>
	</section>
	{% endblock %}
	{% block form %}
	<div class="col-sm-6 col-lg-3 p-b-50">
		<h4 class="stext-301 cl0 p-b-30">
			Newsletter
		</h4>
		<form method="POST">
			{% csrf_token %}
			<div class="wrap-input1 w-full p-b-4">
				<input class="input1 bg-none plh1 stext-107 cl7" id="new_email" name="new_email" type="email" placeholder="email@exemple.com" required="">
				<div class="focus-input1 trans-04"></div>
			</div>

			<div class="p-t-18">
				<button class="flex-c-m stext-101 cl0 size-103 bg1 bor1 hov-btn2 p-lr-15 trans-04">
					Envoyer
				</button>
			</div>
		</form>
	</div>
	{% endblock %}
	
	{% block js %}
	<script type="text/javascript">
		console.log('juste pour tester');
    var panierId = localStorage.getItem('panierId') || 'panier'; // Utilisez "panier" par dÃ©faut
    var panier = {};

    if (localStorage.getItem(panierId) !== null) {
        panier = JSON.parse(localStorage.getItem(panierId));
    }

    $(document).on('click', '.ted', function () {
        console.log('ajouter');
        var item_id = this.id.toString();
        console.log(item_id);

        if (panier[item_id] !== undefined) {
            quantite = panier[item_id][0] + 1;
            panier[item_id][0] = quantite;
            panier[item_id][2] += parseFloat(document.getElementById("price" + item_id).innerHTML);
        } else {
            quantite = 1;
            prix = parseFloat(document.getElementById("price" + item_id).innerHTML);
            name = document.getElementById("ab" + item_id).innerHTML;
            panier[item_id] = [quantite, name, prix];
        }

        console.log(panier);
        localStorage.setItem(panierId, JSON.stringify(panier));
        document.getElementById(panierId).innerHTML = Object.keys(panier).length;
        document.getElementById('panier2').innerHTML = Object.keys(panier).length; // Mise Ã  jour de panier2
    });
		if (localStorage.getItem('panier')==null){
			var panier={}

		}else{
			panier=JSON.parse(localStorage.getItem('panier'));
		}
		var total=0;
		var nombre=0;
		for(item in panier){
			let nom=panier[item][1];
			let quantite=panier[item][0];
			let prix=panier[item][2];
			nombre+=quantite;
			total+=prix;
			let itemString=`<li class="header-cart-item flex-w flex-t m-b-12">
				
						<div class="header-cart-item-txt p-t-8">
							<a href="#" class="header-cart-item-name">
								${nom}
							</a>
						</div>
						<div class="header-cart-item-txt p-t-8">
							<span class="header-cart-item-info">
								${quantite} x ${prix}<br><br>
							</span>
						</div>
					</li>`;
					$('#item-list').append(itemString);
		}
		let itemNombre=`<div class="header-cart-total w-full p-tb-40" >
						Total: ${total} Fcfa
					</div>`;
			$('#item-total').append(itemNombre);

		//MESSAGE
		const styleSwitcherToggle = document.querySelector(".nav-icon");
        styleSwitcherToggle.addEventListener("click", () =>{
            if(localStorage.getItem('panier')==null){
            var panier={};
            alert("Pour commander un produit, vous devez lâ€™ajouter dans votre panier !");
        }else{
            document.querySelector(".js-show-cart").classList.toggle("open");
        }
            
        })
		</script>
	
	{% endblock %}

	 